<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Notifications - JBR7 Bags</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="home.css">
  <style>
        .notification-panel {
            position: fixed;
            top: 0;
            right: -420px;
            width: 400px;
            height: 100vh;
            background: #ffffff;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.08);
            transition: right 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .notification-panel.active {
            right: 0;
        }

        .notification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 999;
        }

        .notification-overlay.active {
            display: block;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e6f4ea;
            background: #0a7a3a; /* solid green */
            color: #fff;
        }

        .notification-header h3 {
            margin: 0;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-panel {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: transform 0.2s;
        }

        .close-panel:hover { transform: rotate(90deg); }

        .notification-filters {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            border-bottom: 1px solid #f0f8f2;
            overflow-x: auto;
            background: #f9fff7;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #dfeee0;
            background: #fff;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }

        .filter-btn.active { background: #0a7a3a; color: #fff; border-color: #0a7a3a; }

        .notifications-list { flex: 1; overflow-y: auto; padding: 10px 0; background: #fff; }

        .notification-item { padding: 15px 20px; border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: background 0.2s; position: relative; }
        .notification-item:hover { background: #fbfff9; }
        .notification-item.unread { background: #eef9ec; }
        .notification-item.unread::before { content: ''; position: absolute; left: 10px; top: 50%; transform: translateY(-50%); width: 8px; height: 8px; background: #0a7a3a; border-radius: 50%; }

        .notification-content { margin-left: 15px; }
        .notification-title { font-weight: 600; margin-bottom: 5px; color: #333; display:flex; align-items:center; gap:8px; }
        .notification-type-icon.orders { color: #2e7d32; }
        .notification-type-icon.promotions { color: #ff8f00; }
        .notification-type-icon.updates { color: #1565c0; }
        .notification-message { font-size: 14px; color: #666; margin-bottom: 5px; }
        .notification-time { font-size: 12px; color: #999; }

        .notification-footer { display:flex; gap:10px; padding:15px 20px; border-top:1px solid #e6f4ea; background: #f9fff7; }
        .notification-footer button { flex:1; padding:10px; border:1px solid #dfeee0; background:#fff; border-radius:5px; cursor:pointer; }
        .notification-footer button:hover { background:#0a7a3a; color:#fff; border-color:#0a7a3a; }

        .empty-notifications { text-align:center; padding:50px 20px; color:#999; }
        .empty-notifications i { font-size:48px; margin-bottom:15px; color:#ddd; }

        .notification-badge { position:absolute; top:-5px; right:-5px; background:#ff4444; color:#fff; border-radius:50%; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:bold; }

        @media (max-width: 768px) {
            .notification-panel { width: 100%; right: -100%; }
            .notification-header { padding: 14px; }
            .notification-filters { padding: 10px; }
            .notification-footer { padding: 12px; }
        }
    </style>
</head>
<body>
    <header>
    <a href="home.html" class="logo">
            <img src="JBR7 BAGS LOGO.png" alt="JBR7 BAGS LOGO" class="logo-img" onerror="this.style.display='none'">
            <div class="logo-text">
                <h2><span>JBR7</span> BAGS</h2>
                <span class="sub-logo">MANUFACTURING</span>
            </div>
        </a>
        <div class="header-sep" aria-hidden="true"></div>
        <nav>
            <a href="home.html" onclick="handleNavigate('home'); return false;" data-page="home"><i class="fas fa-home"></i> Home</a>
            <a href="explore.html" onclick="handleNavigate('explore'); return false;" data-page="explore"><i class="fas fa-compass"></i> Explore</a>
            <a href="saved.html" onclick="handleNavigate('saved'); return false;" data-page="saved"><i class="fas fa-bookmark"></i> Saved</a>
            <a href="cart.html" onclick="handleNavigate('cart'); return false;" data-page="cart"><i class="fas fa-shopping-cart"></i> Cart</a>
            <a href="contact.html" onclick="handleNavigate('contact'); return false;" data-page="contact"><i class="fas fa-envelope"></i> Contact Us</a>
            <a href="settings.html" onclick="handleNavigate('settings'); return false;" data-page="settings"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" onclick="handleNavigate('search'); return false;" data-page="search"><i class="fas fa-search"></i></a>
            <a href="#" onclick="handleNavigate('notifications'); return false;" data-page="notifications"><i class="fas fa-bell"></i></a>
            <a href="#" onclick="handleNavigate('messages'); return false;" data-page="messages"><i class="fas fa-comment"></i></a>
            <a href="profile.html" onclick="handleNavigate('profile'); return false;" data-page="profile"><i class="fas fa-user-circle"></i></a>
        </nav>
    </header>

    <!-- Notification Panel Markup -->
    <div id="notificationPanel" class="notification-panel" aria-hidden="true">
        <div class="notification-header">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <button class="close-panel" onclick="closeNotificationPanel()"><i class="fas fa-times"></i></button>
        </div>
        <div class="notification-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="orders">Orders</button>
            <button class="filter-btn" data-filter="promotions">Promotions</button>
            <button class="filter-btn" data-filter="updates">Updates</button>
        </div>
        <div class="notifications-list">
            <!-- rendered by notifications.js -->
        </div>
        <div class="notification-footer">
            <button id="markAllBtn">Mark all as read</button>
            <button id="clearAllBtn">Clear all</button>
        </div>
    </div>
    <div id="notificationOverlay" class="notification-overlay" onclick="closeNotificationPanel()"></div>

    <main style="padding:20px;">
        <h1>Your Notifications</h1>
        <p>Manage your notifications here. The state is saved across pages (stored locally in your browser).</p>
    </main>

    <script src="jbr7js/home.js"></script>
    <script src="jbr7js/notifications.js"></script>
    <script>
        // Panel control functions used by the markup
        function openNotificationPanel() {
            const panel = document.getElementById('notificationPanel');
            const overlay = document.getElementById('notificationOverlay');
            panel.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            // render list
            window.JBR7Notifications.renderNotifications('.notifications-list');
        }

        function closeNotificationPanel() {
            const panel = document.getElementById('notificationPanel');
            const overlay = document.getElementById('notificationOverlay');
            panel.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Wire filter buttons
        document.addEventListener('DOMContentLoaded', function() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            let currentFilter = 'all';
            function applyFilter() {
                const all = window.JBR7Notifications.loadNotifications();
                const filtered = currentFilter === 'all' ? all : all.filter(n => n.type === currentFilter);
                const listEl = document.querySelector('.notifications-list');
                if (!listEl) return;
                if (filtered.length === 0) {
                    listEl.innerHTML = `\n                        <div class="empty-notifications">\n                            <i class="fas fa-bell-slash"></i>\n                            <p>No notifications</p>\n                        </div>\n                    `;
                    window.JBR7Notifications.updateNotificationBadge();
                    return;
                }
                listEl.innerHTML = filtered.map(notification => `
                    <div class="notification-item ${notification.read ? '' : 'unread'}" data-id="${notification.id}">
                        <div class="notification-content">
                            <div class="notification-title">
                                <i class="fas ${notification.icon} notification-type-icon ${notification.type}"></i>
                                ${notification.title}
                            </div>
                            <div class="notification-message">${notification.message}</div>
                            <div class="notification-time">${notification.time}</div>
                        </div>
                    </div>
                `).join('');

                // Attach click handlers
                listEl.querySelectorAll('.notification-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        window.JBR7Notifications.markAsRead(id);
                        // Re-apply filter to update view
                        applyFilter();
                    });
                });
            }

            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.dataset.filter;
                    applyFilter();
                });
            });

            // Footer buttons
            document.getElementById('markAllBtn').addEventListener('click', function() {
                window.JBR7Notifications.markAllAsRead();
                applyFilter();
            });
            document.getElementById('clearAllBtn').addEventListener('click', function() {
                window.JBR7Notifications.clearAllNotifications();
                applyFilter();
            });

            // Open panel when arriving on this page
            openNotificationPanel();

            // Keep the badge updated
            window.JBR7Notifications.updateNotificationBadge();
        });
    </script>
</body>
</html>
